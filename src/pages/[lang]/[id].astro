---
import Layout from "../../layouts/Layout.astro";
import App from "../../components/App.astro";
import { AstroSeo } from '@astrolib/seo';
import { AvailableLanguages, CanonicalUrl } from "../../constants";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const stories = await getCollection('stories');
	return AvailableLanguages.map(lang => stories.map(story => ({
		 params: { id: story.id, lang }, props: { story }
	
	}))).flat();
}
const { story } = Astro.props;
const title = '3D Stories Template';
const description = '3D Stories Template is a starter template for building 3D stories with Astro. It provides a flexible structure to create immersive web experiences.';
---

<Layout 
	title={title}
	description={description}
>
<AstroSeo
	title={title}
	description={description}
	canonical={CanonicalUrl}
/>
id: {story.id}, lang: {Astro.params.lang}
<br/>
	<App transition:persist />
</Layout>